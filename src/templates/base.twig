{# src/templates/base.twig #}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>{% block title %}FlowDesk{% endblock %}</title>
    <link rel="stylesheet" href="/styles/out.tailwind.css">
    {% block styles %}{% endblock %}
</head>
<body>
    {% if show_navbar is defined and show_navbar %}
        {% include 'components/navbar.twig' %}
    {% endif %}
    
    <main>
        {% block content %}{% endblock %}
    </main>
    
    {% include 'components/footer.twig' %}
    
    {% block scripts %}{% endblock %}
    
    {# Client-side auth check for protected routes #}
    <script type="module">
        import { AuthContext } from "../js/context/authContext.js";
        
        // List of protected routes
        const protectedRoutes = ['/dashboard', '/tickets'];
        const currentPath = window.location.pathname;
        
        if (protectedRoutes.includes(currentPath) && !AuthContext.isAuthenticated()) {
            window.location.href = '/sign-up';
        }
    </script>
</body>
</html>